<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="zz_xiaoming's blog."><meta name="keywords" content="博客, 前端, js"><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.4"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.4"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="stylesheet" type="text/css" href="https://unpkg.com/gitalk/dist/gitalk.css?v=2.0.4"><title>前端调起支付接口 | zz_xiaoming's blog.</title><meta name="generator" content="Hexo 4.0.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">前端调起支付接口</h1><a id="logo" href="/.">zz_xiaoming's blog.</a><p class="description">less talking, more working</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">前端调起支付接口</h1><div class="post-meta"><a href="/2020/04/26/%E5%89%8D%E7%AB%AF%E8%B0%83%E8%B5%B7%E6%94%AF%E4%BB%98%E6%8E%A5%E5%8F%A3/#comments" class="comment-count"></a><p><span class="date">Apr 26, 2020</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><a id="more"></a>

<p><img src="/2020/04/26/%E5%89%8D%E7%AB%AF%E8%B0%83%E8%B5%B7%E6%94%AF%E4%BB%98%E6%8E%A5%E5%8F%A3/tu01.jpg" alt="无题" title="无题"></p>
<hr>
<p>今天被问到一个问题，“会接入微信，支付宝等支付工具吗”，之前没有详细了解过，不过，一般商城类的项目都会用到支付这种环节，所以来说还是非常重要的。又想到了不同的支付情况，PC端的话，那就是网页弹出，手机支付，那么网页这边只需要弹出一个限时性的二维码，一定延迟内根据后端返回的支付状态信息弹出不同的消息框即可；如果是移动端的话或许基本上使用app跳转的方式来进行支付了，然后配置相关支付软件就行了。</p>
<p>先附上两个官方文档：</p>
<p><a href="https://pay.weixin.qq.com/wiki/doc/api/index.html" target="_blank" rel="noopener">微信官方文档</a>(分为两种JSAPI支付和APP支付，这里以JSAPI支付为例：H5调起支付)</p>
<p><a href="https://opendocs.alipay.com/apis" target="_blank" rel="noopener">支付宝官方文档</a></p>
<blockquote>
<h3 id="微信支付"><a href="#微信支付" class="headerlink" title="微信支付"></a>微信支付</h3></blockquote>
<p>微信文档中的例子如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onBridgeReady</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   WeixinJSBridge.invoke(</span><br><span class="line">      <span class="string">'getBrandWCPayRequest'</span>, &#123;</span><br><span class="line">         <span class="string">"appId"</span>:<span class="string">"wx2421b1c4370ec43b"</span>,     <span class="comment">//公众号名称，由商户传入     </span></span><br><span class="line">         <span class="string">"timeStamp"</span>:<span class="string">"1395712654"</span>,         <span class="comment">//时间戳，自1970年以来的秒数     </span></span><br><span class="line">         <span class="string">"nonceStr"</span>:<span class="string">"e61463f8efa94090b1f366cccfbbb444"</span>, <span class="comment">//随机串     </span></span><br><span class="line">         <span class="string">"package"</span>:<span class="string">"prepay_id=u802345jgfjsdfgsdg888"</span>,     </span><br><span class="line">         <span class="string">"signType"</span>:<span class="string">"MD5"</span>,         <span class="comment">//微信签名方式：     </span></span><br><span class="line">         <span class="string">"paySign"</span>:<span class="string">"70EA570631E4BB79628FBCA90534C63FF7FADD89"</span> <span class="comment">//微信签名 </span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(res.err_msg == <span class="string">"get_brand_wcpay_request:ok"</span> )&#123;</span><br><span class="line">      <span class="comment">// 使用以上方式判断前端返回,微信团队郑重提示：</span></span><br><span class="line">            <span class="comment">//res.err_msg将在用户支付成功后返回ok，但并不保证它绝对可靠。</span></span><br><span class="line">      &#125; </span><br><span class="line">   &#125;); </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 下面是兼容不同浏览器绑定事件的方法</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> WeixinJSBridge == <span class="string">"undefined"</span>)&#123;</span><br><span class="line">   <span class="keyword">if</span>( <span class="built_in">document</span>.addEventListener )&#123;</span><br><span class="line">       <span class="built_in">document</span>.addEventListener(<span class="string">'WeixinJSBridgeReady'</span>, onBridgeReady, <span class="literal">false</span>);</span><br><span class="line">   &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.attachEvent)&#123;</span><br><span class="line">       <span class="built_in">document</span>.attachEvent(<span class="string">'WeixinJSBridgeReady'</span>, onBridgeReady); </span><br><span class="line">       <span class="built_in">document</span>.attachEvent(<span class="string">'onWeixinJSBridgeReady'</span>, onBridgeReady);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   onBridgeReady();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们主要是从后台中获取数据传入onBridgeReady这个方法中。<br>所以第一步是获取数据，第二步是把获取到的数据传入到onBridgeReady方法</p>
<h4 id="第一步：发送请求获取后台数据"><a href="#第一步：发送请求获取后台数据" class="headerlink" title="第一步：发送请求获取后台数据"></a>第一步：发送请求获取后台数据</h4><p>1.在对应的api文件下封装请求（get）</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">wechatPay</span>(<span class="params">type, vid, token, point, discount</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> discount_type = discount || <span class="literal">null</span></span><br><span class="line">  <span class="keyword">return</span> axios.get(<span class="string">`<span class="subst">$&#123;Host&#125;</span>/api/save_mobile`</span>,&#123;</span><br><span class="line">    <span class="attribute">params</span>: &#123;</span><br><span class="line">      <span class="attribute">pay_type</span>: type,</span><br><span class="line">      <span class="attribute">video_id</span>: vid,</span><br><span class="line">      token,</span><br><span class="line">      <span class="built_in">point</span>,</span><br><span class="line">      discount_type</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.在对应的组件调用请求</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p @<span class="attribute">click</span>=<span class="string">"_wechatPay(paytype, <span class="variable">$route</span>.query.video_id, info.token, info.points)"</span> <span class="attribute">class</span>=<span class="string">"submit"</span>&gt;发送支付请求&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; wechatPay &#125; <span class="keyword">from</span> <span class="string">'../../../api/pay.js'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">'payfooter'</span>,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    info() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.user.info</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 获取选择支付的方式</span></span><br><span class="line">    paytype() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.pay.paytype</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    _wechatPay(<span class="keyword">type</span>, vid, token, point) &#123;</span><br><span class="line">       wechatPay(<span class="keyword">type</span>, vid, token, point).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(res) <span class="comment">// 这个res就是后台返回的数据</span></span><br><span class="line">       &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.后台返回的json格式数据如下（这不是console出来，方便显示我就直接把json数据复制过来）</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"appId"</span>: <span class="string">"wx5beac*******7c40c"</span>,</span><br><span class="line">        <span class="attr">"nonceStr"</span>: <span class="string">"8491k3******Rs5"</span>,</span><br><span class="line">        <span class="attr">"package"</span>: <span class="string">"prepay_id=wx07**************2653"</span>,</span><br><span class="line">        <span class="attr">"paySign"</span>: <span class="string">"CDE21B*************40C1A"</span>,</span><br><span class="line">        <span class="attr">"signType"</span>: <span class="string">"MD5"</span>,</span><br><span class="line">        <span class="attr">"timeStamp"</span>: <span class="string">"15******1"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"msg"</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="第二步：把数据传给onBridgeReady函数"><a href="#第二步：把数据传给onBridgeReady函数" class="headerlink" title="第二步：把数据传给onBridgeReady函数"></a>第二步：把数据传给onBridgeReady函数</h4><p>所以真正需要获取的内容是 res.data.data，然后再把res.data.data的值传给onBridgeReady函数</p>
<p>4.重新整理一下代码就是</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  _wechatPay(type, vid, token, point) &#123;</span><br><span class="line">     wechatPay(type, vid, token, point).then(res =&gt; &#123;</span><br><span class="line">          res = res.<span class="keyword">data</span></span><br><span class="line">          <span class="keyword">if</span>(res.code === <span class="number">0</span>) &#123;</span><br><span class="line">              <span class="keyword">this</span>.onBridgeReady(res.<span class="keyword">data</span>) <span class="comment">// 这样就把res.data传给onBridgeReady函数</span></span><br><span class="line">          &#125;</span><br><span class="line">     &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 微信支付api相关配置文档</span></span><br><span class="line">  onBridgeReady(<span class="keyword">data</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (typeof WeixinJSBridge === <span class="string">'undefined'</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.$toast(&#123; message: <span class="string">'请使用微信内置浏览器进行支付'</span> &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      WeixinJSBridge.invoke(</span><br><span class="line">        <span class="string">'getBrandWCPayRequest'</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          appId: <span class="keyword">data</span>.appId, <span class="comment">// 公众号名称，由商户传入</span></span><br><span class="line">          timeStamp: <span class="keyword">data</span>.timeStamp, <span class="comment">// 时间戳，自1970年以来的秒数</span></span><br><span class="line">          nonceStr: <span class="keyword">data</span>.nonceStr, <span class="comment">// 随机串</span></span><br><span class="line">          <span class="keyword">package</span>: <span class="keyword">data</span>.<span class="keyword">package</span>,</span><br><span class="line">          signType: <span class="keyword">data</span>.signType, <span class="comment">// 微信签名方式：</span></span><br><span class="line">          paySign: <span class="keyword">data</span>.paySign <span class="comment">// 微信签名</span></span><br><span class="line">        &#125;,</span><br><span class="line">        res =&gt; &#123;</span><br><span class="line">          <span class="keyword">if</span> (res.err_msg === <span class="string">'get_brand_wcpay_request:ok'</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.$toast(&#123; message: <span class="string">'支付成功'</span> &#125;)</span><br><span class="line">            <span class="keyword">this</span>.$router.push(&#123;path: <span class="string">'/videoplayer'</span>, query: &#123; video_id: <span class="keyword">this</span>.$route.query.video_id &#125;&#125;) <span class="comment">// 支付成功之后跳转的路由</span></span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.$toast(&#123; message: <span class="string">'支付失败'</span> &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      )</span><br><span class="line">    &#125; </span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="支付宝支付"><a href="#支付宝支付" class="headerlink" title="支付宝支付"></a>支付宝支付</h3></blockquote>
<p>与微信支付不同的是，支付宝支付后台是返回form格式的数据，如下</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">&lt;form name="punchout_form" method="post" action="https://openapi.alipay.com/gateway.do?charset=UTF<span class="number">-8</span><span class="variable">&amp;method</span>=alipay.trade.wap.pay<span class="variable">&amp;sign</span>=DEpMkI**********************eWUs6EW3QKlt9OHYv%<span class="number">2F</span>qkporO8Sr5%<span class="number">2</span>Bay5VA9dpx3pAbIiPPajQ2gEcWHvz5bm*******kxH8ZvHUXahQL9S69p9wKNXpXOxYadlsxE8QKGUc4cO5rrgGq08%<span class="number">2</span>BpiOq%<span class="number">2F</span>Oz4fLogEBWANXILUMWXNzJn8YryNifZ416Pd%<span class="number">2</span>BxkKgXs%<span class="number">2F</span>o%<span class="number">2F</span>QDcqEUg*********VXXPRq7IGRGQg%<span class="number">2F</span>pZkOhxCH%<span class="number">2F</span>q%<span class="number">2</span>B9hnWEncAfQLlAXfPqjdcQTNJ0TJdVr1X1ENOdAr5LQkydWw2EQ8g%<span class="number">3</span>D%<span class="number">3</span>D<span class="variable">&amp;return_url</span>=+https%<span class="number">3</span>A%<span class="number">2F</span>%<span class="number">2</span>**********<span class="variable">&amp;notify_url</span>=+https%<span class="number">3</span>A%<span class="number">2F</span>%*********Fpub%<span class="number">2F</span>api%<span class="number">2F</span>v1%<span class="number">2F</span>********allback1<span class="variable">&amp;version</span>=<span class="number">1.0</span><span class="variable">&amp;app_id</span>=<span class="number">20</span>********<span class="number">57</span><span class="variable">&amp;sign_type</span>=R***<span class="variable">&amp;timestamp</span>=<span class="number">2019</span><span class="number">-0</span>******<span class="number">55</span><span class="variable">&amp;alipay_sdk</span>=al*******<span class="number">.49</span>.ALL<span class="variable">&amp;format</span>=json"&gt;</span></span><br><span class="line">    <span class="params">&lt;input type="hidden" name="biz_content" value="&#123;<span class="variable">&amp;quot</span>;body<span class="variable">&amp;quot</span>;:<span class="variable">&amp;quot</span>;<span class="variable">&amp;quot</span>;,<span class="variable">&amp;quot</span>;enable_pay_channels<span class="variable">&amp;quot</span>;:<span class="variable">&amp;quot</span>;balance,moneyFund,bankPay,debitCardExpress,creditCardExpress,creditCard,pcredit,pcreditpayInstallment,coupon,point,voucher,mdiscount,honeyPay<span class="variable">&amp;quot</span>;,<span class="variable">&amp;quot</span>;out_trade_no<span class="variable">&amp;quot</span>;:<span class="variable">&amp;quot</span>;<span class="number">132</span>ecf937ad84487aa6cbaeb2ec157fe<span class="variable">&amp;quot</span>;,<span class="variable">&amp;quot</span>;product_code<span class="variable">&amp;quot</span>;:<span class="variable">&amp;quot</span>;<span class="number">13</span><span class="variable">&amp;quot</span>;,<span class="variable">&amp;quot</span>;subject<span class="variable">&amp;quot</span>;:<span class="variable">&amp;quot</span>;SpringBoot <span class="number">2.</span>x微信支付在线教育网站项目实战<span class="variable">&amp;quot</span>;,<span class="variable">&amp;quot</span>;timeout_express<span class="variable">&amp;quot</span>;:<span class="variable">&amp;quot</span>;<span class="number">20</span>m<span class="variable">&amp;quot</span>;,<span class="variable">&amp;quot</span>;total_amount<span class="variable">&amp;quot</span>;:<span class="variable">&amp;quot</span>;<span class="number">98</span><span class="variable">&amp;quot</span>;&#125;"&gt;</span></span><br><span class="line">    <span class="params">&lt;input type="submit" value="立即支付" style="display:none" &gt;</span></span><br><span class="line"><span class="params">&lt;/form&gt;</span></span><br><span class="line"><span class="params">&lt;script&gt;</span>document.forms[<span class="number">0</span>].submit();<span class="params">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>那么在处理后台数据的时候用下面的方法（参考网络大神）</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="constructor">_wechatPay(<span class="params">type</span>, <span class="params">vid</span>, <span class="params">token</span>, <span class="params">point</span>)</span> &#123;</span><br><span class="line">     wechat<span class="constructor">Pay(<span class="params">type</span>, <span class="params">vid</span>, <span class="params">token</span>, <span class="params">point</span>)</span>.<span class="keyword">then</span>(res =&gt; &#123;</span><br><span class="line">        const form = res.data</span><br><span class="line">        const div = document.create<span class="constructor">Element('<span class="params">div</span>')</span></span><br><span class="line">        div.id = 'alipay'</span><br><span class="line">        div.innerHTML = form</span><br><span class="line">        document.body.append<span class="constructor">Child(<span class="params">div</span>)</span></span><br><span class="line">        document.query<span class="constructor">Selector('#<span class="params">alipay</span>')</span>.children<span class="literal">[<span class="number">0</span>]</span>.submit<span class="literal">()</span> <span class="comment">// 执行后会唤起支付宝</span></span><br><span class="line">     &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div><div class="post-copyright"><blockquote><p>原文作者: 骑猪骑士</p><p>原文链接: <a href="http://zhaokunming.xyz/2020/04/26/前端调起支付接口/">http://zhaokunming.xyz/2020/04/26/前端调起支付接口/</a></p><p>版权声明: 转载请注明出处(必须保留作者署名及链接)</p></blockquote></div><div class="tags"><a href="/tags/vue/">vue</a></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/2020/04/26/%E5%90%84%E7%A7%8D%E5%9C%BA%E6%99%AF%E5%94%A4%E8%B5%B7App/" class="pre">各种场景唤起App</a><a href="/2020/04/20/vue-router%E4%B9%8Bkeep-alive/" class="next">vue-router之keep-alive</a></div><div id="comments"><div id="container"><script type="text/javascript" src="https://unpkg.com/gitalk/dist/gitalk.min.js?v=2.0.4"></script><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=2.0.4"></script><script>var gitalk = new Gitalk({
  clientID: 'b9866c2ced487dfb61db',
  clientSecret: '802b6c3f8fe51c7e135315c617f51de05ecd97f1',
  repo: 'gitalk.github.io',
  owner: 'pretendtobehappy',
  admin: ['pretendtobehappy'],
  id: md5(window.location.pathname),
  distractionFreeMode: false,
  language: 'zh-CN',
  pagerDirection: 'last'
})
gitalk.render('container')</script></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#微信支付"><span class="toc-text">微信支付</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#第一步：发送请求获取后台数据"><span class="toc-text">第一步：发送请求获取后台数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#第二步：把数据传给onBridgeReady函数"><span class="toc-text">第二步：把数据传给onBridgeReady函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#支付宝支付"><span class="toc-text">支付宝支付</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/04/26/%E5%90%84%E7%A7%8D%E5%9C%BA%E6%99%AF%E5%94%A4%E8%B5%B7App/">各种场景唤起App</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/26/%E5%89%8D%E7%AB%AF%E8%B0%83%E8%B5%B7%E6%94%AF%E4%BB%98%E6%8E%A5%E5%8F%A3/">前端调起支付接口</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/20/vue-router%E4%B9%8Bkeep-alive/">vue-router之keep-alive</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/11/%E6%96%B0%E5%A2%9E%E5%92%8C%E7%BC%96%E8%BE%91%E5%BC%B9%E7%AA%97%E9%97%AE%E9%A2%98/">新增和编辑弹窗问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/28/%E5%85%B3%E4%BA%8E%E6%96%B0%E5%86%A0%E7%8A%B6%E7%97%85%E6%AF%92%E7%9A%84%E8%B6%85%E9%95%BF%E5%81%87%E6%9C%9F/">关于新冠状病毒的超长假期</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/08/%E9%98%B2%E6%8A%96%E5%92%8C%E8%8A%82%E6%B5%81/">防抖和节流</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/12/15/%E6%95%B0%E5%AD%97%E8%BE%93%E5%85%A5%E6%A1%86%E5%A6%82%E4%BD%95%E5%8E%BB%E6%8E%89%E5%8F%B3%E8%BE%B9%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%8C%89%E9%92%AE/">数字输入框如何去掉右边的上下按钮</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/24/vue%E4%B8%ADaxios%E7%9A%84%E5%B0%81%E8%A3%85/">Vue中axios的封装</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/05/%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3vue%E4%B8%AD%E7%9A%84nextTick/">简单理解vue中的nextTick</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/11/vue%E4%B8%ADslot%E6%8F%92%E6%A7%BD%E7%9A%84%E4%BD%BF%E7%94%A8/">vue中slot插槽的使用</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/Chrome/" style="font-size: 15px;">Chrome</a> <a href="/tags/%E8%B7%A8%E5%9F%9F/" style="font-size: 15px;">跨域</a> <a href="/tags/Vue/" style="font-size: 15px;">Vue</a> <a href="/tags/Vuex/" style="font-size: 15px;">Vuex</a> <a href="/tags/axios/" style="font-size: 15px;">axios</a> <a href="/tags/vue/" style="font-size: 15px;">vue</a> <a href="/tags/css3/" style="font-size: 15px;">css3</a> <a href="/tags/%E8%87%AA%E9%80%82%E5%BA%94/" style="font-size: 15px;">自适应</a> <a href="/tags/html/" style="font-size: 15px;">html</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/web%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" style="font-size: 15px;">web性能优化</a> <a href="/tags/elementUI/" style="font-size: 15px;">elementUI</a> <a href="/tags/react/" style="font-size: 15px;">react</a> <a href="/tags/flux/" style="font-size: 15px;">flux</a> <a href="/tags/filters/" style="font-size: 15px;">filters</a> <a href="/tags/redux/" style="font-size: 15px;">redux</a> <a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size: 15px;">生活</a> <a href="/tags/start/" style="font-size: 15px;">start</a> <a href="/tags/vuex%E8%AF%AD%E6%B3%95%E7%B3%96/" style="font-size: 15px;">vuex语法糖</a> <a href="/tags/vue%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0/" style="font-size: 15px;">vue辅助函数</a> <a href="/tags/slot/" style="font-size: 15px;">slot</a> <a href="/tags/%E5%B1%80%E9%83%A8%E5%88%B7%E6%96%B0/" style="font-size: 15px;">局部刷新</a> <a href="/tags/withRouter/" style="font-size: 15px;">withRouter</a> <a href="/tags/title%E8%AE%BE%E7%BD%AE/" style="font-size: 15px;">title设置</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 15px;">随笔</a> <a href="/tags/%E6%9D%82%E8%B0%88/" style="font-size: 15px;">杂谈</a> <a href="/tags/vue-router/" style="font-size: 15px;">vue-router</a> <a href="/tags/jquery/" style="font-size: 15px;">jquery</a> <a href="/tags/ajax/" style="font-size: 15px;">ajax</a> <a href="/tags/App/" style="font-size: 15px;">App</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 15px;">前端</a> <a href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" style="font-size: 15px;">性能优化</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017</a><span class="archive-list-count">5</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">骑猪骑士.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.4"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.4" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>